pipeline {
  
  agent any
  
  stages {
    stage ('stage scm'){
      steps {
        git 'https://github.com/dstar55/docker-hello-world-spring-boot.git'
       
      }
    }
      stage ('stage maven'){
        steps {
        sh 'mvn clean install'
      
        
      }  
    }
    stage ('docker build stage')  {
    steps {
    script {
    // This step should not normally be used in your script. Consult the inline help for details.
withDockerRegistry(credentialsId: 'ecr:us-east-2:AWS Credentials', url: 'public.ecr.aws/m1a9e8g6/docker_repo') {
    // some block
def myImage = docker.build("helloworld")
myImage.push("v1")
}
    }
    }
    }
  }
}
