pipeline {
  
  agent any
  
  stages {
    stage ('stage scm'){
      steps {
        git 'https://github.com/dstar55/docker-hello-world-spring-boot.git'
       
      }
    }
      stage ('stage maven'){
        steps {
        sh 'mvn clean install'
      
        
      }  
    }
    stage ('docker build stage')  {
    steps {
    script {
    // This step should not normally be used in your script. Consult the inline help for details.
withDockerRegistry(credentialsId: 'ecr:us-east-2:AWS Credentials', url: 'https://836267957233.dkr.ecr.us-east-2.amazonaws.com') {
    // some block
    def myImage = docker.build("docker_repo")
myImage.push("v1")
}
}
    }
    }
    }
  }
